<ion-content [fullscreen]="true" style="--background: #white;">
        <!-- Sidebar -->
        <div class="menu-dashboard" id="sidebar">
          <div class="top-menu">
            <div class="logo">
              <!-- Aquí se agrega el logo -->
              <img src="assets/images/logo.png" alt="Logo de Junta Vecinal" class="logo-img">
            </div>
          </div>

        <!-- Menú -->
        <div class="menu">

          <div class="enlace" (click)="irAInicio()">
            <ion-icon name="home" size="small"></ion-icon>
            <span>Inicio</span>
          </div>

          <div class="enlace" (click)="irAQuejas()">
            <ion-icon name="chatbubbles" size="small"></ion-icon>
            <span>Quejas</span>
          </div>

          <div class="enlace" (click)="irAEventos()">
            <ion-icon name="calendar" size="small"></ion-icon>
            <span>Eventos</span>
          </div>

          <div class="enlace" (click)="irANoticias()">
            <ion-icon name="newspaper" size="small"></ion-icon>
            <span>Noticias</span>
          </div>

          <div class="enlace" (click)="irAReportarSituacion()">
            <ion-icon name="alert-circle" size="small"></ion-icon>
            <span>Reportes</span>
          </div>

          <div class="enlace" (click)="irAGestionUsuarios()">
            <ion-icon name="people" size="small"></ion-icon>
            <span>Usuarios</span>
          </div>

          <div class="enlace" (click)="irALocales()">
            <ion-icon name="storefront" size="small"></ion-icon> <!-- Icono para Locales -->
            <span>Locales</span>
          </div>

          <div class="enlace" (click)="volverAlLogin()">
            <ion-icon name="log-out" size="small"></ion-icon>
            <span>Cerrar Sesión</span>
          </div>
        </div>
      </div>


  <!-- Indicadores de Estado -->
  <div class="content" style="background-image: url('assets/images/fondo1.png'); background-size: cover; background-repeat: no-repeat; background-position: center; height: 100vh;">

    <ion-card-title style="display: flex; align-items: center; font-size: xx-large; color: #4a4e69; font-size: bold;">
      <ion-icon name="chatbubbles" style="font-size: 1.6em; color: #6d5dfc; margin-right: 10px;"></ion-icon>
      Quejas
    </ion-card-title>

      <!-- Barra de búsqueda -->
  <div class="search-bar">
    <ion-searchbar [(ngModel)]="searchTerm" placeholder="Buscar quejas..." (ionInput)="filtrarQuejas()" class="search-input"></ion-searchbar>
  </div>
  <ion-grid>
    <ion-row>
      <ion-col size="4">
        <ion-card class="status-card" (click)="filtrarPorEstado('en proceso')">
          <ion-card-header>
            <ion-card-title>
              <div style="display: flex; justify-content: space-between; align-items: center;">
                <span>En Proceso</span>
                <ion-badge color="warning">{{ quejasEnProceso }}</ion-badge>
              </div>
            </ion-card-title>
          </ion-card-header>
        </ion-card>
      </ion-col>

      <ion-col size="4">
        <ion-card class="status-card" (click)="filtrarPorEstado('resuelto')">
          <ion-card-header>
            <ion-card-title>
              <div style="display: flex; justify-content: space-between; align-items: center;">
                <span>Resueltas</span>
                <ion-badge color="success">{{ quejasResueltas }}</ion-badge>
              </div>
            </ion-card-title>
          </ion-card-header>
        </ion-card>
      </ion-col>

      <ion-col size="4">
        <ion-button expand="block" color="medium" (click)="quitarFiltro()">Quitar Filtro</ion-button>
      </ion-col>
    </ion-row>
  </ion-grid>

<!-- Listado de Quejas en formato de ticket -->
<ion-grid>
  <ion-row >
    <ion-col size="6" *ngFor="let queja of quejasFiltradas">
      <ion-card class="ticket-card">
        <div class="categoria-banner" [ngStyle]="{ 'background-color': getColorForCategory(queja.categoria) }" style="text-align: center; font-weight: bold; text-transform: uppercase;">
          <ion-chip class="categoria-chip">
            <ion-icon [name]="getIconForCategory(queja.categoria)"></ion-icon>
            <ion-label>{{ queja.categoria || 'Ninguna' }}</ion-label>
          </ion-chip>
        </div>
        <ion-card-header>
          <ion-card-title style="text-align: center; font-weight: bold;">{{ queja.titulo }}</ion-card-title>
        </ion-card-header>

        <!-- Imagen recortada y más pequeña -->
        <div class="image-container">
          <img *ngIf="queja.archivoAdjunto" [src]="queja.archivoAdjunto" alt="Archivo Adjunto" class="recortada-imagen" />
        </div>

        <ion-card-content class="centered-content content-background" style="margin-left: 20px; margin-right: 20px;">
          <p><strong>Descripción:</strong> {{ queja.descripcion }}</p>
          <p><strong>Estado:</strong> {{ queja.estado }}</p>
          <p *ngIf="queja.respuesta"><strong>Respuesta del Admin:</strong> {{ queja.respuesta }}</p>
          <p><strong>Usuario:</strong> {{ queja.nombreUsuario?.nombre }} {{ queja.nombreUsuario?.apellido }}</p>
        </ion-card-content>

        <!-- Botones para ver detalle y eliminar -->
        <div style="display: flex; justify-content: center; gap: 10px; margin-bottom: 15px;">
          <ion-button (click)="verDetalleQueja(queja)" fill="clear" size="big">
            <ion-icon name="information-circle" slot="icon-only" color="medium" style="font-size: 32px;"></ion-icon>
          </ion-button>
          <ion-button (click)="eliminarQueja(queja.id)" fill="clear" size="big">
            <ion-icon name="trash" slot="icon-only" color="danger" style="font-size: 32px;"></ion-icon>
          </ion-button>
        </div>
      </ion-card>
    </ion-col>
  </ion-row>
</ion-grid>



  <!-- Modal para Detalle de Queja -->
  <ion-modal [isOpen]="modalDetalleAbierto" (ionModalDidClose)="modalDetalleAbierto = false">
    <ng-template>
      <ion-header>
        <ion-toolbar>
          <ion-title>Detalle de Queja</ion-title>
          <ion-buttons slot="end">
            <ion-button (click)="cerrarDetalleQueja()">
              <ion-icon name="close"></ion-icon>
            </ion-button>
          </ion-buttons>
        </ion-toolbar>
      </ion-header>

      <ion-content *ngIf="quejaSeleccionada">
        <ion-card>
          <ion-card-header>
            <div class="categoria-container" [ngStyle]="{ 'background-color': getColorForCategory(quejaSeleccionada.categoria) }">
              <ion-chip class="categoria-chip">
                <ion-icon [name]="getIconForCategory(quejaSeleccionada.categoria)" color="white"></ion-icon>
                <ion-label class="categoria-label">{{ quejaSeleccionada.categoria || 'Ninguna' }}</ion-label>
              </ion-chip>
            </div>
            <ion-card-title>{{ quejaSeleccionada.titulo }}</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <p><strong>Descripción:</strong> {{ quejaSeleccionada.descripcion }}</p>
            <p><strong>Estado:</strong> {{ quejaSeleccionada.estado }}</p>
            <p *ngIf="quejaSeleccionada.respuesta"><strong>Respuesta:</strong> {{ quejaSeleccionada.respuesta }}</p>
            <p><strong>Usuario:</strong> {{ quejaSeleccionada.nombreUsuario?.nombre }} {{ quejaSeleccionada.nombreUsuario?.apellido }}</p>
            <p><strong>Fecha:</strong> {{ getFormattedDate(quejaSeleccionada.fecha) }}</p>
            <div class="imagen-contenedor">
              <img *ngIf="quejaSeleccionada.archivoAdjunto" [src]="quejaSeleccionada.archivoAdjunto" alt="Archivo Adjunto" class="adjunto-imagen" />
            </div>
            <ion-item>
              <ion-label position="floating">Respuesta del Admin</ion-label>
              <ion-textarea [(ngModel)]="respuestaAdmin"></ion-textarea>
            </ion-item>
          </ion-card-content>

          <ion-footer>
            <ion-button expand="full" color="success" (click)="cerrarCaso()">Cerrar Queja</ion-button>
            <ion-button expand="full" color="danger" (click)="eliminarQueja(quejaSeleccionada.id)">Eliminar Queja</ion-button>
          </ion-footer>
        </ion-card>
      </ion-content>
    </ng-template>
  </ion-modal>
</div>
</ion-content>
